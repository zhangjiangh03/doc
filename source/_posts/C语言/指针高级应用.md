---
title: 指针高级应用
date: 2022-09-25 10:32:00
categories:
- C语言
tags:
- C语言
---

指针是 C 和 C++ 语言中非常重要的一个特性，它允许我们对内存进行精细的控制和管理。

## 多级指针

多级指针是指指向指针的指针。

```c
int a = 1;
int *p1 = &a;
int **p2 = &p1;
```

上面的代码中，`p1`是一个指向`a`的指针，而`p2`是一个指向`p1`的指针。
通过多级指针，我们可以动态地为一个指针分配空间。

```c
int **p = (int **)malloc(sizeof(int *));
*p = (int *)malloc(sizeof(int));
**p = 1;
```

上面的代码中，首先为一个指向指针的指针分配了空间，然后为指向的指针再分配一块空间，并将其初始化为`1`。
多级指针在动态内存分配、链表、树等数据结构的实现中经常使用。

## 指向函数的指针数组

指向函数的指针数组是一个数组，每个元素都是指向函数的指针。

```c
int add(int a, int b) {
    return a + b;
}

int sub(int a, int b) {
    return a - b;
}

int mul(int a, int b) {
    return a * b;
}

int (*funcs[])(int, int) = {add, sub, mul};
```

通过数组下标或指针来访问每个元素，并通过指针调用相应的函数。

```c
int result = funcs[0](2, 3); // result = 5
```