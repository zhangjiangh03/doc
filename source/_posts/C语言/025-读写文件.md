---
title: 读写文件
date: 2022-12-25 13:45:00
categories:
- C语言
tags:
- C语言基础
---

在编程中，经常需要对文件进行读写操作。C 语言提供了一组标准库函数，方便我们进行文件的打开和关闭操作。

## 文件读取

在 C 语言中，可以使用`fread`函数从文件中读取数据。`fread`函数需要传入以下参数：

- `void *ptr`：指向要读取数据的内存地址。
- `size_t size`：每个数据项的大小。
- `size_t count`：要读取的数据项数量。
- `FILE *stream`：要读取数据的文件指针。

```c
#include <stdio.h>

int main() {
    FILE *fp = fopen("example.txt", "r");
    if (fp == NULL) {
        printf("Open file failed.\n");
        return -1;
    }

    char buf[11];
    buf[10] = '\0';
    fread(buf, 10, 1, fp);
    printf("%s\n", buf);

    fclose(fp);
    return 0;
}
```

## 文件写入

在 C 语言中，可以使用`fwrite`函数向文件中写入数据。`fwrite`函数需要传入以下参数：

- `const void *ptr`：指向要写入数据的内存地址。
- `size_t size`：每个数据项的大小。
- `size_t count`：要写入的数据项数量。
- `FILE *stream`：要写入数据的文件指针。

例如，以下代码向文件`example.txt`中写入字符串`Hello World`：

```c
#include <stdio.h>

int main() {
    FILE *fp = fopen("example.txt", "w");
    if (fp == NULL) {
        printf("Open file failed.\n");
        return -1;
    }

    fwrite("Hello World", 11, 1, fp);

    fclose(fp);
    return 0;
}
```

## 完整示例

```c
#include <stdio.h>

int main() {
    FILE *fp = fopen("example.txt", "w");
    if (fp == NULL) {
        printf("Open file failed.\n");
        return -1;
    }

    fwrite("Hello World", 11, 1, fp);

    fclose(fp);


    fp = fopen("example.txt", "r");
    if (fp == NULL) {
        printf("Open file failed.\n");
        return -1;
    }

    char buf[11];
    buf[10] = '\0';
    fread(buf, 10, 1, fp);
    printf("%s\n", buf);

    fclose(fp);
    return 0;
}
```

上面的代码打开名为`example.txt`的文件，并将字符串`Hello World`写入到文件中，接着又从文件 `xample.txt`中读取`10`个字符并输出到标准输出，最后关闭文件。