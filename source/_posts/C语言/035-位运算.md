---
title: 位运算
date: 2022-09-25 10:31:00
categories:
- C语言
tags:
- C语言基础
---

在计算机科学中，位运算（Bitwise Operation）是一种基于二进制位的运算。
它们通常用于以一些特定的方式操作位序列，例如掩码、标志、交换和旋转等。

## 按位与、按位或

按位与和按位或是两个最基本的位运算符。对于两个二进制位 A 和 B，它们的结果是：

- `A & B`：若 A 和 B 都为`1`，则结果为`1`，否则结果为`0`。
- `A | B`：若 A 或 B 的某一个为`1`，则结果为`1`，否则结果为`0`。

例如，对于二进制数`1010`和`1100`，它们的按位与结果为`1000`，按位或结果为`1110`。
按位与和按位或在编程中经常用于操作二进制标志位。

```c
#define FLAG_READ 0x01  // 0000 0001
#define FLAG_WRITE 0x02 // 0000 0010
#define FLAG_EXEC 0x04  // 0000 0100

unsigned char flags = FLAG_READ | FLAG_WRITE; // 0000 0011

if (flags & FLAG_READ) {
    // do something
}
```

上面的代码定义了三个二进制标志位，然后通过按位或操作将其中的两个标志合并为一个字节。在运行时，可以使用按位与操作来判断这个字节是否包含某个标志。

## 按位异或、按位取反

按位异或和按位取反也是两个常用的位运算符。
按位异或表示当两个位都为`0`或`1`时，结果为`0`，当两个位一个为`0`，一个为`1`时，结果为`1`。

```
0 ^ 0 = 0
0 ^ 1 = 1
1 ^ 0 = 1
1 ^ 1 = 0
```

按位异或常用于加密和校验等领域中。
按位取反是一元运算符，它将二进制数中的每一位都取反，例如`~1010`的结果为`0101`。
这个运算符经常用于补码的转换和位掩码的生成。

## 左移、右移

左移和右移是另外两个重要的位运算符，它们可以将二进制数中的位向左或向右移动若干位，并在低位填充`0`。对于左移操作，高位溢出被丢弃，对于右移操作，低位溢出被丢弃。
例如，左移操作`1010 << 2`的结果为`1000 00`，而右移操作`1010 >> 2`的结果为`0000 10`。
左移和右移常用于替代乘法或除法操作，尤其是针对`2`的幂次方的操作，在效率上要比使用乘法和除法快得多。